{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { delay } from 'rxjs/operators';\nimport Swal from 'sweetalert2';\nlet MedicosComponent = class MedicosComponent {\n  constructor(medicoService, modalImagenService, busquedasService) {\n    this.medicoService = medicoService;\n    this.modalImagenService = modalImagenService;\n    this.busquedasService = busquedasService;\n    this.cargando = true;\n    this.medicos = [];\n  }\n\n  ngOnDestroy() {\n    this.imgSubs.unsubscribe();\n  }\n\n  ngOnInit() {\n    this.cargarMedicos();\n    this.imgSubs = this.imgSubs = this.modalImagenService.nuevaImagen.pipe(delay(100)).subscribe(img => this.cargarMedicos());\n  }\n\n  cargarMedicos() {\n    this.cargando = true;\n    this.medicoService.cargarMedicos().subscribe(medicos => {\n      this.cargando = false;\n      this.medicos = medicos;\n    });\n  }\n\n  buscar(termino) {\n    if (termino.length === 0) {\n      return this.cargarMedicos();\n    }\n\n    this.busquedasService.buscar('medicos', termino).subscribe(resp => {\n      this.medicos = resp;\n    });\n  }\n\n  abrirModal(medico) {\n    this.modalImagenService.abrirModal('medicos', medico._id, medico.img);\n  }\n\n  borrarMedico(medico) {\n    Swal.fire({\n      title: '¿Borrar médico?',\n      text: `Esta a punto de borrar a ${medico.nombre}`,\n      icon: 'question',\n      showCancelButton: true,\n      confirmButtonText: 'Si, borrarlo'\n    }).then(result => {\n      if (result.value) {\n        this.medicoService.borrarMedico(medico._id).subscribe(resp => {\n          this.cargarMedicos();\n          Swal.fire('Médico borrado', `${medico.nombre} fue eliminado correctamente`, 'success');\n        });\n      }\n    });\n  }\n\n};\nMedicosComponent = __decorate([Component({\n  selector: 'app-medicos',\n  templateUrl: './medicos.component.html',\n  styles: []\n})], MedicosComponent);\nexport { MedicosComponent };","map":null,"metadata":{},"sourceType":"module"}